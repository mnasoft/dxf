;;;; header-section-group-codes-list.lisp

(in-package #:dxf)

(defparameter *h-vars-list-min*
  '(("ACADVER"  1 "AC1027")
    ("HANDSEED" 5 "61"))
  "Мининмальный файл заголовка")

(defclass Db-Header ()
  ((header-vars :accessor header-vars :initarg :header-vars :initform *h-vars-list-min*
		:documentation "
http://help.autodesk.com/view/ACD/2017/RUS/?guid=GUID-A85E8E67-27CD-4C59-BE61-4DC9FADBE74A
http://help.autodesk.com/view/ACD/2017/ENU/?guid=GUID-A85E8E67-27CD-4C59-BE61-4DC9FADBE74A
")))

(defmethod dxf-out-text :before ((x Db-Header) stream)
	   (format stream "~A~%~A~%~A~%~A~%" (dxf-code 0) "SECTION" (dxf-code 2) "HEADER"))

(defmethod dxf-out-text ((x Db-Header) stream)
  (mapc #'(lambda (el)
	    (format stream "~A~%~A~%~A~%~A~%"
		    (dxf-code 9)
		    (concatenate 'string "$" (first el))
		    (dxf-code (second el))
		    (third el)
		    ))
	(header-vars x)))

(defmethod dxf-out-text :after ((x Db-Header) stream)
  (format stream "~A~%ENDSEC~%" (dxf-code 0)))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(defparameter *h-vars* (make-hash-table :test 'equal))

(mapc #'(lambda (el)
	  (setf (gethash (first el) *h-vars*) (list (second el) (third el))))
      *h-vars-list*)
      


(defparameter *h-vars-list*
  '(
    ( "ACADMAINTVER" 70 nil)
    ( "ACADVER" 1 "19.0s (LMS Tech)")
    ( "ANGBASE" 50 0.0)
    ( "ANGDIR" 70 0)
    ( "ATTMODE" 70 1)
    ( "AUNITS" 70 0)
    ( "AUPREC" 70 0)
    ( "CECOLOR" 62 "BYLAYER")
    ( "CELTSCALE" 40 1.0)
    ( "CELTYPE" 6 "ByLayer")
    ( "CELWEIGHT" 370 -1)
    ( "CEPSNID" 390 nil)
    ( "CEPSNTYPE" 380 nil)
    ( "CHAMFERA" 40 0.0)
    ( "CHAMFERB" 40 0.0)
    ( "CHAMFERC" 40 0.0)
    ( "CHAMFERD" 40 0.0)
    ( "CLAYER" 8 "0")
    ( "CMLJUST" 70 0)
    ( "CMLSCALE" 40 20.0)
    ( "CMLSTYLE" 2 "STANDARD")
    ( "CSHADOW" 280 0)
    ( "DIMADEC" 70 0)
    ( "DIMALT" 70 0)
    ( "DIMALTD" 70 3)
    ( "DIMALTF" 40 0.0393701)
    ( "DIMALTRND" 40 0.0)
    ( "DIMALTTD" 70 3)
    ( "DIMALTTZ" 70 0)
    ( "DIMALTU" 70 2)
    ( "DIMALTZ" 70 0)
    ( "DIMAPOST" 1 )
    ( "DIMASO" 70 1)
    ( "DIMASSOC" 280 2)
    ( "DIMASZ" 40 2.5)
    ( "DIMATFIT" 70 3)
    ( "DIMAUNIT" 70 0)
    ( "DIMAZIN" 70 0)
    ( "DIMBLK" 1 )
    ( "DIMBLK1" 1 )
    ( "DIMBLK2" 1 )
    ( "DIMCEN" 40 2.5)
    ( "DIMCLRD" 70 0)
    ( "DIMCLRE" 70 0)
    ( "DIMCLRT" 70 0)
    ( "DIMDEC" 70 2)
    ( "DIMDLE" 40 0.0)
    ( "DIMDLI" 40 3.75)
    ( "DIMDSEP" 70 ",")
    ( "DIMEXE" 40 1.25)
    ( "DIMEXO" 40 0.625)
    ( "DIMFAC" 40 nil)
    ( "DIMGAP" 40 0.625)
    ( "DIMJUST" 70 0)
    ( "DIMLDRBLK" 1 )
    ( "DIMLFAC" 40 1.0)
    ( "DIMLIM" 70 0)
    ( "DIMLUNIT" 70 2)
    ( "DIMLWD" 70 -2)
    ( "DIMLWE" 70 -2)
    ( "DIMPOST" 1 )
    ( "DIMRND" 40 0.0)
    ( "DIMSAH" 70 0)
    ( "DIMSCALE" 40 1.0)
    ( "DIMSD1" 70 0)
    ( "DIMSD2" 70 0)
    ( "DIMSE1" 70 0)
    ( "DIMSE2" 70 0)
    ( "DIMSHO" 70 1)
    ( "DIMSOXD" 70 0)
    ( "DIMSTYLE" 2 "ISO-25")
    ( "DIMTAD" 70 1)
    ( "DIMTDEC" 70 2)
    ( "DIMTFAC" 40 1.0)
    ( "DIMTIH" 70 0)
    ( "DIMTIX" 70 0)
    ( "DIMTM" 40 0.0)
    ( "DIMTMOVE" 70 0)
    ( "DIMTOFL" 70 1)
    ( "DIMTOH" 70 0)
    ( "DIMTOL" 70 0)
    ( "DIMTOLJ" 70 0)
    ( "DIMTP" 40 0.0)
    ( "DIMTSZ" 40 0.0)
    ( "DIMTVP" 40 0.0)
    ( "DIMTXSTY" 7 "Standard")
    ( "DIMTXT" 40 2.5)
    ( "DIMTZIN" 70 8)
    ( "DIMUPT" 70 0)
    ( "DIMZIN" 70 8)
    ( "DISPSILH" 70 0)
    ( "DRAGVS" 349 )
    ( "DWGCODEPAGE" 3 "ANSI_1251")
    ( "ELEVATION" 40 0.0)
    ( "ENDCAPS" 280 nil)
    ( "EXTMAX" '(10 20 30) '(-1.0e+020 -1.0e+020 -1.0e+020))
    ( "EXTMIN" '(10 20 30) '(1.0e+020 1.0e+020 1.0e+020))
    ( "EXTNAMES" 290 1)
    ( "FILLETRAD" 40 0.0)
    ( "FILLMODE" 70 1)
    ( "FINGERPRINTGUID" 2 nil)
    ( "HALOGAP" 280 0)
    ( "HANDSEED" 5 nil)
    ( "HIDETEXT" 290 1)
    ( "HYPERLINKBASE" 1 )
    ( "INDEXCTL" 280 0)
    ( "INSBASE" ' (10 20 30) '(0.0 0.0 0.0))
    ( "INSUNITS" 70 4)
    ( "INTERFERECOLOR" 62 1)
    ( "INTERFEREOBJVS" 345 "Realistic")
    ( "INTERFEREVPVS" 346 "Wireframe")
    ( "INTERSECTIONCOLOR" 70 257)
    ( "INTERSECTIONDISPLAY" 290 0)
    ( "JOINSTYLE" 280 nil)
    ( "LIMCHECK" 70 0)
    ( "LIMMAX" '(10 20) '(420.0 297.0))
    ( "LIMMIN" '(10 20) '(0.0 0.0))
    ( "LTSCALE" 40 1.0)
    ( "LUNITS" 70 2)
    ( "LUPREC" 70 4)
    ( "LWDISPLAY" 290 0)
    ( "MAXACTVP" 70 64)
    ( "MEASUREMENT" 70 1)
    ( "MENU" 1 nil)
    ( "MIRRTEXT" 70 0)
    ( "OBSCOLOR" 70 nil)
    ( "OBSLTYPE" 280 nil)
    ( "ORTHOMODE" 70 0)
    ( "PDMODE" 70 0)
    ( "PDSIZE" 40 0.0)
    ( "PELEVATION" 40 nil)
    ( "PEXTMAX" '(10 20 30) nil)
    ( "PEXTMIN" '(10 20 30) nil)
    ( "PINSBASE" '(10 20 30) nil)
    ( "PLIMCHECK" 70 nil)
    ( "PLIMMAX" '(10 20) nil)
    ( "PLIMMIN" '(10 20) nil)
    ( "PLINEGEN" 70 0)
    ( "PLINEWID" 40 0.0)
    ( "PROJECTNAME" 1 )
    ( "PROXYGRAPHICS" 70 1)
    ( "PSLTSCALE" 70 1)
    ( "PSTYLEMODE" 290 1)
    ( "PSVPSCALE" 40 0.0)
    ( "PUCSBASE" 2 )
    ( "PUCSNAME" 2 nil)
    ( "PUCSORG" '(10 20 30) nil)
    ( "PUCSORGBACK" '(10 20 30) nil)
    ( "PUCSORGBOTTOM" '(10 20 30) nil)
    ( "PUCSORGFRONT" '(10 20 30) nil)
    ( "PUCSORGLEFT" '(10 20 30) nil)
    ( "PUCSORGRIGHT" '(10 20 30) nil)
    ( "PUCSORGTOP" '(10 20 30) nil)
    ( "PUCSORTHOREF" 2 nil)
    ( "PUCSORTHOVIEW" 70 nil)
    ( "PUCSXDIR" '(10 20 30) nil)
    ( "PUCSYDIR" '(10 20 30) nil)
    ( "QTEXTMODE" 70 0)
    ( "REGENMODE" 70 1)
    ( "SHADEDGE" 70 3)
    ( "SHADEDIF" 70 70)
    ( "SHADOWPLANELOCATION" 40 0.0)
    ( "SKETCHINC" 40 1.0)
    ( "SKPOLY" 70 0)
    ( "SORTENTS" 280 127)
    ( "SPLINESEGS" 70 8)
    ( "SPLINETYPE" 70 6)
    ( "SURFTAB1" 70 6)
    ( "SURFTAB2" 70 6)
    ( "SURFTYPE" 70 6)
    ( "SURFU" 70 6)
    ( "SURFV" 70 6)
    ( "TDCREATE" 40 2.45776e+006)
    ( "TDINDWG" 40 0.283427)
    ( "TDUCREATE" 40 2.45776e+006)
    ( "TDUPDATE" 40 2.45776e+006)
    ( "TDUSRTIMER" 40 0.283426)
    ( "TDUUPDATE" 40 2.45776e+006)
    ( "TEXTSIZE" 40 2.5)
    ( "TEXTSTYLE" 7 Standard)
    ( "THICKNESS" 40 0.0)
    ( "TILEMODE" 70 1)
    ( "TRACEWID" 40 1.0)
    ( "TREEDEPTH" 70 3020)
    ( "UCSBASE" 2 )
    ( "UCSNAME" 2 )
    ( "UCSORG" '(10 20 30) '(0.0 0.0 0.0))
    ( "UCSORGBACK" '(10 20 30) nil)
    ( "UCSORGBOTTOM" '(10 20 30) nil)
    ( "UCSORGFRONT" '(10 20 30) nil)
    ( "UCSORGLEFT" '(10 20 30) nil)
    ( "UCSORGRIGHT" '(10 20 30) nil)
    ( "UCSORGTOP" '(10 20 30) nil)
    ( "UCSORTHOREF" 2 nil)
    ( "UCSORTHOVIEW" 70 nil)
    ( "UCSXDIR" '(10 20 30) '(1.0 0.0 0.0))
    ( "UCSYDIR" '(10 20 30) '(0.0 1.0 0.0))
    ( "UNITMODE" 70 0)
    ( "USERI1" 70 0)
    ( "USERI2" 70 0)
    ( "USERI3" 70 0)
    ( "USERI4" 70 0)
    ( "USERI5" 70 0)
    ( "USERR1" 40 0.0)
    ( "USERR2" 40 0.0)
    ( "USERR3" 40 0.0)
    ( "USERR4" 40 0.0)
    ( "USERR5" 40 0.0)
    ( "USRTIMER" 70 nil)
    ( "VERSIONGUID" 2 nil)
    ( "VISRETAIN" 70 1)
    ( "WORLDVIEW" 70 1)
    ( "XCLIPFRAME" 290 2)
    ( "XEDIT" 290 1)))
